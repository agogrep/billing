<?xml version="1.0"?>
<script>

    <masterfield>tid</masterfield>

    <part>
      <name>main</name>
      <section>
        <parentselector>.//*[@id="main"]</parentselector>
        <selector>.//*[@id="form"]</selector>
        <repeat>0</repeat>
      </section>
      <sql>
        <readquery>
          SELECT t.tid,t.tdate,t.tcurr,t.accept,t.plus,t.minus,
                      t.source,s.aname sourcename,s.side sourceside, s.usebal sourceusebal,
                      t.dest,d.aname destname, d.side destside,
                      t.scassa, t.dcassa,
                      IF(t.scassa = 0, 'root', su.login) AS slogin,
                      IF(t.dcassa = 0, 'root', du.login) AS dlogin,
                      d.usebal destusebal,
                      t.oid,t.descr, u.uid,u.login, s.curr sourcecurr, d.curr destcurr
          FROM transactions t
          LEFT OUTER JOIN users u ON t.uid = u.uid
          LEFT OUTER JOIN accounts s ON t.source = s.aid
          LEFT OUTER JOIN accounts d ON t.dest = d.aid
          LEFT OUTER JOIN users su ON t.scassa = su.uid
          LEFT OUTER JOIN users du ON t.dcassa = du.uid
          WHERE tid = {tid};
        </readquery>
        <writequery>
        </writequery>
        <writegenerator>
          <scriptname>write</scriptname>
          <param>
            <table>transactions</table>
            <id_name>tid</id_name>
          </param>
        </writegenerator>
        <argument>
          <tid>
            <type>int</type>
            <long></long>
            <default></default>
          </tid>
          <tdate>
            <type>str</type>
            <long></long>
            <default></default>
          </tdate>
          <tcurr>
            <type>str</type>
            <long></long>
            <default></default>
          </tcurr>
          <accept>
            <type>int</type>
            <long></long>
            <default></default>
          </accept>
          <plus>
            <type>int</type>
            <long></long>
            <default></default>
          </plus>
          <minus>
            <type>int</type>
            <long></long>
            <default></default>
          </minus>
          <source>
            <type>int</type>
            <long></long>
            <default></default>
          </source>
          <dest>
            <type>int</type>
            <long></long>
            <default></default>
          </dest>
          <descr>
            <type>str</type>
            <long></long>
            <default></default>
          </descr>
          <scassa>
            <type>int</type>
            <long></long>
            <default></default>
          </scassa>
          <slogin>
            <type>str</type>
            <long></long>
            <default></default>
          </slogin>
          <dcassa>
            <type>int</type>
            <long></long>
            <default></default>
          </dcassa>
          <dlogin>
            <type>str</type>
            <long></long>
            <default></default>
          </dlogin>
          <oid>
            <type>int</type>
            <long></long>
            <default></default>
          </oid>
          <uid>
            <type>int</type>
            <long></long>
            <default></default>
          </uid>
        </argument>
      </sql>

      <layout>
        <element>
          <selector>.//*[@name="tid"]</selector>
          <attribute></attribute>
          <fild>tid</fild>
        </element>
        <element>
          <selector>.//*[@name="tdate"]</selector>
          <attribute>value</attribute>
          <fild>tdate</fild>
        </element>
        <element>
          <selector>.//*[@name="tcurr"]</selector>
          <attribute>value</attribute>
          <fild>tcurr</fild>
        </element>
        <element>
          <selector>.//*[@name="accept"]</selector>
          <attribute>value</attribute>
          <fild>accept</fild>
        </element>
        <element>
          <selector>.//*[@name="plus"]</selector>
          <attribute>value</attribute>
          <fild>plus</fild>
        </element>
        <element>
          <selector>.//*[@name="minus"]</selector>
          <attribute>value</attribute>
          <fild>minus</fild>
        </element>
        <element>
          <selector>.//*[@name="source"]</selector>
          <attribute></attribute>
          <fild></fild>
        </element>
        <element>
          <selector>.//*[@name="sourcename"]</selector>
          <attribute></attribute>
          <fild></fild>
        </element>
        <element>
          <selector>.//*[@name="dest"]</selector>
          <attribute></attribute>
          <fild></fild>
        </element>
        <element>
          <selector>.//*[@name="destname"]</selector>
          <attribute></attribute>
          <fild></fild>
        </element>
        <element>
          <selector>.//*[@name="descr"]</selector>
          <attribute>value</attribute>
          <fild>descr</fild>
        </element>
        <element>
          <selector>.//*[@name="scassa"]</selector>
          <attribute></attribute>
          <fild></fild>
        </element>
        <element>
          <selector>.//*[@name="scassa"]</selector>
          <attribute>data-href</attribute>
          <fild>scassa</fild>
        </element>
        <element>
          <selector>.//*[@name="slogin"]</selector>
          <attribute></attribute>
          <fild></fild>
        </element>
        <element>
          <selector>.//*[@name="dcassa"]</selector>
          <attribute></attribute>
          <fild></fild>
        </element>
        <element>
          <selector>.//*[@name="dcassa"]</selector>
          <attribute>data-href</attribute>
          <fild>dcassa</fild>
        </element>
        <element>
          <selector>.//*[@name="dlogin"]</selector>
          <attribute></attribute>
          <fild></fild>
        </element>
        <element>
          <selector>.//*[@name="oid"]</selector>
          <attribute></attribute>
          <fild></fild>
        </element>
        <element>
          <selector>.//*[@name="uid"]</selector>
          <attribute></attribute>
          <fild></fild>
        </element>
        <element>
          <selector>.//*[@name="login"]</selector>
          <attribute></attribute>
          <fild></fild>
        </element>

        <element>
          <selector>.//*[@name="sourceside"]</selector>
          <attribute></attribute>
          <fild></fild>
        </element>
        <element>
          <selector>.//*[@name="sourceside"]</selector>
          <attribute>data-side</attribute>
          <fild>sourceside</fild>
        </element>
        <element>
          <selector>.//*[@name="sourceusebal"]</selector>
          <attribute></attribute>
          <fild></fild>
        </element>
        <element>
          <selector>.//*[@name="destside"]</selector>
          <attribute></attribute>
          <fild></fild>
        </element>
        <element>
          <selector>.//*[@name="destside"]</selector>
          <attribute>data-side</attribute>
          <fild>destside</fild>
        </element>
        <element>
          <selector>.//*[@name="destusebal"]</selector>
          <attribute></attribute>
          <fild></fild>
        </element>
        <element>
          <selector>.//*[@name="sourcecurr"]</selector>
          <attribute></attribute>
          <fild></fild>
        </element>
        <element>
          <selector>.//*[@name="destcurr"]</selector>
          <attribute></attribute>
          <fild></fild>
        </element>
      </layout>
    </part>
    <part></part>



  </script>
